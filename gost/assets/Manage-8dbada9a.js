import{u as yt,j as r,c as kt,C as Ve,a as ue,b as _,A as jt,L as wt,d as vt,q as xt,g as $e,e as je,f as se,h as Tt,i as Ot,s as Lt,k as At,l as St,T as Vt,m as $t,n as Nt}from"./index-bd11f4a6.js";import{r as b,A as pe,_ as me,f as ae,j as we,I as Ne,d as Y,M as Ee,S as z,k as ve,B as R,l as Et,n as It,h as Bt,i as Ft,T as _t,o as zt,p as Mt,E as Rt,q as Ut,P as Dt,D as Ht,s as Jt,u as Pt,v as Wt,w as re,x as P,y as qt,C as $,L as he,R as ge,z as Gt,G as Qt,H as Xt,J as be}from"./antd-15fa66a0.js";var Zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};const Yt=Zt;var Kt=function(s,n){return b.createElement(pe,me({},s,{ref:n,icon:Yt}))},Ct=b.forwardRef(Kt);const tt=Ct;var en={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};const tn=en;var nn=function(s,n){return b.createElement(pe,me({},s,{ref:n,icon:tn}))},sn=b.forwardRef(nn);const ln=sn;var rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const on=rn;var an=function(s,n){return b.createElement(pe,me({},s,{ref:n,icon:on}))},cn=b.forwardRef(an);const un=cn;var fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};const dn=fn;var pn=function(s,n){return b.createElement(pe,me({},s,{ref:n,icon:dn}))},mn=b.forwardRef(pn);const hn=mn;function nt(e,s=!1){const n=e.length;let t=0,l="",i=0,f=16,o=0,a=0,u=0,c=0,m=0;function j(h,p){let d=0,g=0;for(;d<h||!p;){let y=e.charCodeAt(t);if(y>=48&&y<=57)g=g*16+y-48;else if(y>=65&&y<=70)g=g*16+y-65+10;else if(y>=97&&y<=102)g=g*16+y-97+10;else break;t++,d++}return d<h&&(g=-1),g}function k(h){t=h,l="",i=0,f=16,m=0}function w(){let h=t;if(e.charCodeAt(t)===48)t++;else for(t++;t<e.length&&K(e.charCodeAt(t));)t++;if(t<e.length&&e.charCodeAt(t)===46)if(t++,t<e.length&&K(e.charCodeAt(t)))for(t++;t<e.length&&K(e.charCodeAt(t));)t++;else return m=3,e.substring(h,t);let p=t;if(t<e.length&&(e.charCodeAt(t)===69||e.charCodeAt(t)===101))if(t++,(t<e.length&&e.charCodeAt(t)===43||e.charCodeAt(t)===45)&&t++,t<e.length&&K(e.charCodeAt(t))){for(t++;t<e.length&&K(e.charCodeAt(t));)t++;p=t}else m=3;return e.substring(h,p)}function T(){let h="",p=t;for(;;){if(t>=n){h+=e.substring(p,t),m=2;break}const d=e.charCodeAt(t);if(d===34){h+=e.substring(p,t),t++;break}if(d===92){if(h+=e.substring(p,t),t++,t>=n){m=2;break}switch(e.charCodeAt(t++)){case 34:h+='"';break;case 92:h+="\\";break;case 47:h+="/";break;case 98:h+="\b";break;case 102:h+="\f";break;case 110:h+=`
`;break;case 114:h+="\r";break;case 116:h+="	";break;case 117:const y=j(4,!0);y>=0?h+=String.fromCharCode(y):m=4;break;default:m=5}p=t;continue}if(d>=0&&d<=31)if(le(d)){h+=e.substring(p,t),m=2;break}else m=6;t++}return h}function v(){if(l="",m=0,i=t,a=o,c=u,t>=n)return i=n,f=17;let h=e.charCodeAt(t);if(ye(h)){do t++,l+=String.fromCharCode(h),h=e.charCodeAt(t);while(ye(h));return f=15}if(le(h))return t++,l+=String.fromCharCode(h),h===13&&e.charCodeAt(t)===10&&(t++,l+=`
`),o++,u=t,f=14;switch(h){case 123:return t++,f=1;case 125:return t++,f=2;case 91:return t++,f=3;case 93:return t++,f=4;case 58:return t++,f=6;case 44:return t++,f=5;case 34:return t++,l=T(),f=10;case 47:const p=t-1;if(e.charCodeAt(t+1)===47){for(t+=2;t<n&&!le(e.charCodeAt(t));)t++;return l=e.substring(p,t),f=12}if(e.charCodeAt(t+1)===42){t+=2;const d=n-1;let g=!1;for(;t<d;){const y=e.charCodeAt(t);if(y===42&&e.charCodeAt(t+1)===47){t+=2,g=!0;break}t++,le(y)&&(y===13&&e.charCodeAt(t)===10&&t++,o++,u=t)}return g||(t++,m=1),l=e.substring(p,t),f=13}return l+=String.fromCharCode(h),t++,f=16;case 45:if(l+=String.fromCharCode(h),t++,t===n||!K(e.charCodeAt(t)))return f=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l+=w(),f=11;default:for(;t<n&&L(h);)t++,h=e.charCodeAt(t);if(i!==t){switch(l=e.substring(i,t),l){case"true":return f=8;case"false":return f=9;case"null":return f=7}return f=16}return l+=String.fromCharCode(h),t++,f=16}}function L(h){if(ye(h)||le(h))return!1;switch(h){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function O(){let h;do h=v();while(h>=12&&h<=15);return h}return{setPosition:k,getPosition:()=>t,scan:s?O:v,getToken:()=>f,getTokenValue:()=>l,getTokenOffset:()=>i,getTokenLength:()=>t-i,getTokenStartLine:()=>a,getTokenStartCharacter:()=>i-c,getTokenError:()=>m}}function ye(e){return e===32||e===9}function le(e){return e===10||e===13}function K(e){return e>=48&&e<=57}var Fe;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(Fe||(Fe={}));const M=new Array(20).fill(0).map((e,s)=>" ".repeat(s)),C=200,_e={" ":{"\n":new Array(C).fill(0).map((e,s)=>`
`+" ".repeat(s)),"\r":new Array(C).fill(0).map((e,s)=>"\r"+" ".repeat(s)),"\r\n":new Array(C).fill(0).map((e,s)=>`\r
`+" ".repeat(s))},"	":{"\n":new Array(C).fill(0).map((e,s)=>`
`+"	".repeat(s)),"\r":new Array(C).fill(0).map((e,s)=>"\r"+"	".repeat(s)),"\r\n":new Array(C).fill(0).map((e,s)=>`\r
`+"	".repeat(s))}},gn=[`
`,"\r",`\r
`];function st(e,s,n){let t,l,i,f,o;if(s){for(f=s.offset,o=f+s.length,i=f;i>0&&!de(e,i-1);)i--;let d=o;for(;d<e.length&&!de(e,d);)d++;l=e.substring(i,d),t=bn(l,n)}else l=e,t=0,i=0,f=0,o=e.length;const a=yn(n,e),u=gn.includes(a);let c=0,m=0,j;n.insertSpaces?j=M[n.tabSize||4]??ee(M[1],n.tabSize||4):j="	";const k=j==="	"?"	":" ";let w=nt(l,!1),T=!1;function v(){if(c>1)return ee(a,c)+ee(j,t+m);const d=j.length*(t+m);return!u||d>_e[k][a].length?a+ee(j,t+m):d<=0?a:_e[k][a][d]}function L(){let d=w.scan();for(c=0;d===15||d===14;)d===14&&n.keepLines?c+=1:d===14&&(c=1),d=w.scan();return T=d===16||w.getTokenError()!==0,d}const O=[];function h(d,g,y){!T&&(!s||g<o&&y>f)&&e.substring(g,y)!==d&&O.push({offset:g,length:y-g,content:d})}let p=L();if(n.keepLines&&c>0&&h(ee(a,c),0,0),p!==17){let d=w.getTokenOffset()+i,g=j.length*t<20&&n.insertSpaces?M[j.length*t]:ee(j,t);h(g,i,d)}for(;p!==17;){let d=w.getTokenOffset()+w.getTokenLength()+i,g=L(),y="",V=!1;for(;c===0&&(g===12||g===13);){let N=w.getTokenOffset()+i;h(M[1],d,N),d=w.getTokenOffset()+w.getTokenLength()+i,V=g===12,y=V?v():"",g=L()}if(g===2)p!==1&&m--,n.keepLines&&c>0||!n.keepLines&&p!==1?y=v():n.keepLines&&(y=M[1]);else if(g===4)p!==3&&m--,n.keepLines&&c>0||!n.keepLines&&p!==3?y=v():n.keepLines&&(y=M[1]);else{switch(p){case 3:case 1:m++,n.keepLines&&c>0||!n.keepLines?y=v():y=M[1];break;case 5:n.keepLines&&c>0||!n.keepLines?y=v():y=M[1];break;case 12:y=v();break;case 13:c>0?y=v():V||(y=M[1]);break;case 6:n.keepLines&&c>0?y=v():V||(y=M[1]);break;case 10:n.keepLines&&c>0?y=v():g===6&&!V&&(y="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&c>0?y=v():(g===12||g===13)&&!V?y=M[1]:g!==5&&g!==17&&(T=!0);break;case 16:T=!0;break}c>0&&(g===12||g===13)&&(y=v())}g===17&&(n.keepLines&&c>0?y=v():y=n.insertFinalNewline?a:"");const q=w.getTokenOffset()+i;h(y,d,q),p=g}return O}function ee(e,s){let n="";for(let t=0;t<s;t++)n+=e;return n}function bn(e,s){let n=0,t=0;const l=s.tabSize||4;for(;n<e.length;){let i=e.charAt(n);if(i===M[1])t++;else if(i==="	")t+=l;else break;n++}return Math.floor(t/l)}function yn(e,s){for(let n=0;n<s.length;n++){const t=s.charAt(n);if(t==="\r")return n+1<s.length&&s.charAt(n+1)===`
`?`\r
`:"\r";if(t===`
`)return`
`}return e&&e.eol||`
`}function de(e,s){return`\r
`.indexOf(e.charAt(s))!==-1}var ce;(function(e){e.DEFAULT={allowTrailingComma:!1}})(ce||(ce={}));function kn(e,s=[],n=ce.DEFAULT){let t=null,l=[];const i=[];function f(a){Array.isArray(l)?l.push(a):t!==null&&(l[t]=a)}return rt(e,{onObjectBegin:()=>{const a={};f(a),i.push(l),l=a,t=null},onObjectProperty:a=>{t=a},onObjectEnd:()=>{l=i.pop()},onArrayBegin:()=>{const a=[];f(a),i.push(l),l=a,t=null},onArrayEnd:()=>{l=i.pop()},onLiteralValue:f,onError:(a,u,c)=>{s.push({error:a,offset:u,length:c})}},n),l[0]}function lt(e,s=[],n=ce.DEFAULT){let t={type:"array",offset:-1,length:-1,children:[],parent:void 0};function l(a){t.type==="property"&&(t.length=a-t.offset,t=t.parent)}function i(a){return t.children.push(a),a}rt(e,{onObjectBegin:a=>{t=i({type:"object",offset:a,length:-1,parent:t,children:[]})},onObjectProperty:(a,u,c)=>{t=i({type:"property",offset:u,length:-1,parent:t,children:[]}),t.children.push({type:"string",value:a,offset:u,length:c,parent:t})},onObjectEnd:(a,u)=>{l(a+u),t.length=a+u-t.offset,t=t.parent,l(a+u)},onArrayBegin:(a,u)=>{t=i({type:"array",offset:a,length:-1,parent:t,children:[]})},onArrayEnd:(a,u)=>{t.length=a+u-t.offset,t=t.parent,l(a+u)},onLiteralValue:(a,u,c)=>{i({type:jn(a),offset:u,length:c,parent:t,value:a}),l(u+c)},onSeparator:(a,u,c)=>{t.type==="property"&&(a===":"?t.colonOffset=u:a===","&&l(u))},onError:(a,u,c)=>{s.push({error:a,offset:u,length:c})}},n);const o=t.children[0];return o&&delete o.parent,o}function xe(e,s){if(!e)return;let n=e;for(let t of s)if(typeof t=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let l=!1;for(const i of n.children)if(Array.isArray(i.children)&&i.children[0].value===t&&i.children.length===2){n=i.children[1],l=!0;break}if(!l)return}else{const l=t;if(n.type!=="array"||l<0||!Array.isArray(n.children)||l>=n.children.length)return;n=n.children[l]}return n}function rt(e,s,n=ce.DEFAULT){const t=nt(e,!1),l=[];function i(x){return x?()=>x(t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter()):()=>!0}function f(x){return x?()=>x(t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter(),()=>l.slice()):()=>!0}function o(x){return x?A=>x(A,t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter()):()=>!0}function a(x){return x?A=>x(A,t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter(),()=>l.slice()):()=>!0}const u=f(s.onObjectBegin),c=a(s.onObjectProperty),m=i(s.onObjectEnd),j=f(s.onArrayBegin),k=i(s.onArrayEnd),w=a(s.onLiteralValue),T=o(s.onSeparator),v=i(s.onComment),L=o(s.onError),O=n&&n.disallowComments,h=n&&n.allowTrailingComma;function p(){for(;;){const x=t.scan();switch(t.getTokenError()){case 4:d(14);break;case 5:d(15);break;case 3:d(13);break;case 1:O||d(11);break;case 2:d(12);break;case 6:d(16);break}switch(x){case 12:case 13:O?d(10):v();break;case 16:d(1);break;case 15:case 14:break;default:return x}}}function d(x,A=[],J=[]){if(L(x),A.length+J.length>0){let I=t.getToken();for(;I!==17;){if(A.indexOf(I)!==-1){p();break}else if(J.indexOf(I)!==-1)break;I=p()}}}function g(x){const A=t.getTokenValue();return x?w(A):(c(A),l.push(A)),p(),!0}function y(){switch(t.getToken()){case 11:const x=t.getTokenValue();let A=Number(x);isNaN(A)&&(d(2),A=0),w(A);break;case 7:w(null);break;case 8:w(!0);break;case 9:w(!1);break;default:return!1}return p(),!0}function V(){return t.getToken()!==10?(d(3,[],[2,5]),!1):(g(!1),t.getToken()===6?(T(":"),p(),S()||d(4,[],[2,5])):d(5,[],[2,5]),l.pop(),!0)}function q(){u(),p();let x=!1;for(;t.getToken()!==2&&t.getToken()!==17;){if(t.getToken()===5){if(x||d(4,[],[]),T(","),p(),t.getToken()===2&&h)break}else x&&d(6,[],[]);V()||d(4,[],[2,5]),x=!0}return m(),t.getToken()!==2?d(7,[2],[]):p(),!0}function N(){j(),p();let x=!0,A=!1;for(;t.getToken()!==4&&t.getToken()!==17;){if(t.getToken()===5){if(A||d(4,[],[]),T(","),p(),t.getToken()===4&&h)break}else A&&d(6,[],[]);x?(l.push(0),x=!1):l[l.length-1]++,S()||d(4,[],[4,5]),A=!0}return k(),x||l.pop(),t.getToken()!==4?d(8,[4],[]):p(),!0}function S(){switch(t.getToken()){case 3:return N();case 1:return q();case 10:return g(!0);default:return y()}}return p(),t.getToken()===17?n.allowEmptyContent?!0:(d(4,[],[]),!1):S()?(t.getToken()!==17&&d(9,[],[]),!0):(d(4,[],[]),!1)}function jn(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(e){if(Array.isArray(e))return"array"}else return"null";return"object"}default:return"null"}}function wn(e,s,n,t){const l=s.slice(),f=lt(e,[]);let o,a;for(;l.length>0&&(a=l.pop(),o=xe(f,l),o===void 0&&n!==void 0);)typeof a=="string"?n={[a]:n}:n=[n];if(o)if(o.type==="object"&&typeof a=="string"&&Array.isArray(o.children)){const u=xe(o,[a]);if(u!==void 0)if(n===void 0){if(!u.parent)throw new Error("Malformed AST");const c=o.children.indexOf(u.parent);let m,j=u.parent.offset+u.parent.length;if(c>0){let k=o.children[c-1];m=k.offset+k.length}else m=o.offset+1,o.children.length>1&&(j=o.children[1].offset);return Z(e,{offset:m,length:j-m,content:""},t)}else return Z(e,{offset:u.offset,length:u.length,content:JSON.stringify(n)},t);else{if(n===void 0)return[];const c=`${JSON.stringify(a)}: ${JSON.stringify(n)}`,m=t.getInsertionIndex?t.getInsertionIndex(o.children.map(k=>k.children[0].value)):o.children.length;let j;if(m>0){let k=o.children[m-1];j={offset:k.offset+k.length,length:0,content:","+c}}else o.children.length===0?j={offset:o.offset+1,length:0,content:c}:j={offset:o.offset+1,length:0,content:c+","};return Z(e,j,t)}}else if(o.type==="array"&&typeof a=="number"&&Array.isArray(o.children)){const u=a;if(u===-1){const c=`${JSON.stringify(n)}`;let m;if(o.children.length===0)m={offset:o.offset+1,length:0,content:c};else{const j=o.children[o.children.length-1];m={offset:j.offset+j.length,length:0,content:","+c}}return Z(e,m,t)}else if(n===void 0&&o.children.length>=0){const c=a,m=o.children[c];let j;if(o.children.length===1)j={offset:o.offset+1,length:o.length-2,content:""};else if(o.children.length-1===c){let k=o.children[c-1],w=k.offset+k.length,T=o.offset+o.length;j={offset:w,length:T-2-w,content:""}}else j={offset:m.offset,length:o.children[c+1].offset-m.offset,content:""};return Z(e,j,t)}else if(n!==void 0){let c;const m=`${JSON.stringify(n)}`;if(!t.isArrayInsertion&&o.children.length>a){const j=o.children[a];c={offset:j.offset,length:j.length,content:m}}else if(o.children.length===0||a===0)c={offset:o.offset+1,length:0,content:o.children.length===0?m:m+","};else{const j=a>o.children.length?o.children.length:a,k=o.children[j-1];c={offset:k.offset+k.length,length:0,content:","+m}}return Z(e,c,t)}else throw new Error(`Can not ${n===void 0?"remove":t.isArrayInsertion?"insert":"modify"} Array index ${u} as length is not sufficient`)}else throw new Error(`Can not add ${typeof a!="number"?"index":"property"} to parent of type ${o.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return Z(e,{offset:f?f.offset:0,length:f?f.length:0,content:JSON.stringify(n)},t)}}function Z(e,s,n){if(!n.formattingOptions)return[s];let t=Te(e,s),l=s.offset,i=s.offset+s.content.length;if(s.length===0||s.content.length===0){for(;l>0&&!de(t,l-1);)l--;for(;i<t.length&&!de(t,i);)i++}const f=st(t,{offset:l,length:i-l},{...n.formattingOptions,keepLines:!1});for(let a=f.length-1;a>=0;a--){const u=f[a];t=Te(t,u),l=Math.min(l,u.offset),i=Math.max(i,u.offset+u.length),i+=u.content.length-u.length}const o=e.length-(t.length-i)-l;return[{offset:l,length:o,content:t.substring(l,i)}]}function Te(e,s){return e.substring(0,s.offset)+s.content+e.substring(s.offset+s.length)}var ze;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(ze||(ze={}));var Me;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(Me||(Me={}));const vn=kn,xn=lt,Tn=xe;var Re;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Re||(Re={}));function On(e,s,n){return st(e,s,n)}function fe(e,s,n,t){return wn(e,s,n,t)}function Ie(e,s){let n=s.slice(0).sort((l,i)=>{const f=l.offset-i.offset;return f===0?l.length-i.length:f}),t=e.length;for(let l=n.length-1;l>=0;l--){let i=n[l];if(i.offset+i.length<=t)e=Te(e,i);else throw new Error("Overlapping edit");t=i.offset}return e}const Ln=["_id_","_key_","_type_"],Oe=e=>JSON.stringify(e,null,4),ie=e=>{const s={...e};for(const n of Ln)delete s[n];return Oe(s)},An=e=>Ie(e,On(e,void 0,{tabSize:4,insertSpaces:!0})),Q=e=>{const s=[],n=vn(e,s,{allowTrailingComma:!0});if(s.length)throw console.error(s),s[0];return n},Sn=(e,s)=>{const n=[],t=fe.bind(null,e);return s.forEach(({path:l,value:i,options:f},o)=>{l=Array.isArray(l)?l:l.split("."),n.push(...t(l,i,f||{}))}),Ie(e,n)},Vn=(e,s)=>{const n=URL.createObjectURL(new Blob([e])),t=document.createElement("a");t.download=s,t.href=n,t.click(),URL.revokeObjectURL(n)};function Le(e,s,n){const t=e!==void 0,l=s!==void 0,[i,f]=b.useState(t?e:l?s:n),o=b.useRef({value:i,setValue:u=>{let c;typeof u=="function"?c=u(o.current.value):c=u,o.current.value=c,f(c)}});return[b.useMemo(()=>{const c=e!==void 0?e:i;return o.current.value=c,c},[e,i]),o.current.setValue]}(function(){const e=window.require;e&&e.config({"vs/nls":{availableLanguages:{"*":"zh-cn"}}}),window.monacoIsReady=new Promise((s,n)=>{if(!e)return n("Not loaded monaco loader.js");e(["vs/editor/editor.main"],function(){s(monaco)})})})();monacoIsReady.then(()=>{monaco.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0,trailingCommas:"warning",validate:!0})});const $n={minimap:{enabled:!1},automaticLayout:!0},Nn=(e,s)=>{const{onChange:n,options:t,height:l,className:i,theme:f,style:o}=e,[a,u]=Le(e.language,"javascript"),[c,m]=Le(e.value,e.defaultValue,""),[j,k]=b.useState(!1),w=b.useRef(null),T=b.useRef(null),v=b.useRef({}),L=yt(),O=b.useMemo(()=>f||(L?"vs-dark":"vs"),[f,L]);return ae.useImperativeHandle(s,()=>T.current),ae.useImperativeHandle(v,()=>({onChange:n}),[n]),b.useEffect(()=>{monacoIsReady.then(()=>{k(!0)})},[]),b.useEffect(()=>{if(j&&w.current){const h=w.current;let p;return monacoIsReady.then(()=>{p=T.current=monaco.editor.create(h,{value:c,language:a,theme:O,...$n,...t}),p.onDidChangeModelContent(function(d){var y,V;const g=p.getValue();m(g),(V=(y=v.current)==null?void 0:y.onChange)==null||V.call(y,g)}),p.addCommand(monaco.KeyMod.Alt|monaco.KeyCode.KeyX,d=>{var g;(g=p.getAction("my-autoWrap-toggle"))==null||g.run()}),p.addAction({id:"my-autoWrap-toggle",label:"切换自动换行",keybindings:[monaco.KeyMod.Alt|monaco.KeyCode.KeyZ],run:function(d,g){const y=d.getOption(monaco.editor.EditorOption.wordWrap);d.updateOptions({wordWrap:y==="on"?"off":"on"})}})}),()=>{var d;(d=p==null?void 0:p.dispose)==null||d.call(p)}}},[j]),b.useEffect(()=>{T.current&&c!=T.current.getValue()&&T.current.setValue(c)},[c]),j?r.jsx("div",{className:we(i),style:{height:l||"100%",minHeight:0,minWidth:0,boxSizing:"border-box",...o},ref:w}):r.jsx(Ne.TextArea,{style:{height:l||"100%"},className:we(i),value:c,onChange:h=>{var d,g;const p=h.target.value;m(p),(g=(d=v.current)==null?void 0:d.onChange)==null||g.call(d,p)}})},it=ae.forwardRef(Nn),En=e=>{const{onFinish:s,trigger:n,open:t,onOpenChange:l,modalProps:i,title:f,width:o,formRef:a,children:u,...c}=e,[m,j]=Le(t,!1),[k]=Y.useForm(),w=b.useCallback(()=>{var O;j(!1),l==null||l(!1),(O=i==null?void 0:i.onCancel)==null||O.call(i,{})},[l]),T=b.useCallback(()=>{var O;k.resetFields(),(O=i==null?void 0:i.afterClose)==null||O.call(i)},[k,i]),v=b.useMemo(()=>async function(O){await(s==null?void 0:s.apply(null,[O]))===!0&&w()},[s,w]),L=b.useMemo(()=>({...i,onCancel:w,onOk:()=>{k.submit()},afterClose:T,open:m,title:f,width:o}),[T,k,i,w,m,f,o]);return b.useEffect(()=>{if(!a)return;switch(typeof a){case"function":a(k);break;case"object":a.current=k;break}},[k,a]),r.jsxs(r.Fragment,{children:[r.jsx(Ee,{...L,children:r.jsx(Y,{form:k,onFinish:v,...c,children:u})}),n&&ae.cloneElement(n,{onClick:()=>{j(!0)}})]})},ot=e=>{const{templates:s,...n}=e,t=b.useRef(),l=o=>{var u,c,m;let a=o;if((u=e.initialValues)!=null&&u.value){const j=Q(e.initialValues.value);a=j.name?Sn(o,[{path:"name",value:j.name}]):o}a=An(a),(c=t.current)==null||c.setFieldValue("value",a),(m=t.current)==null||m.validateFields()},i=o=>{const{children:a,...u}=o,{json:c,cli:m}=o;if(a)return{...u,children:a.map(i)};if(c)return{...u,title:m,onClick:()=>l(c)}},f=s==null?void 0:s.length;return r.jsx(r.Fragment,{children:r.jsxs(En,{...n,formRef:t,modalProps:{destroyOnClose:!0,maskClosable:!1},children:[f?r.jsxs(z,{size:"small",style:{marginBottom:5},children:[r.jsx("span",{children:"模板:"}),s.map((o,a)=>{var u;if((u=o.children)!=null&&u.length){const c={items:o.children.map(i)};return o.json?r.jsx(ve.Button,{size:"small",onClick:()=>l(o.json),menu:c,children:o.label},a):r.jsx(ve,{menu:c,children:r.jsx(R,{size:"small",children:r.jsxs(z,{children:[o.label,r.jsx(Et,{})]})})},a)}else return o.json?r.jsx(R,{size:"small",title:o.cli,onClick:()=>l(o.json),children:r.jsx(z,{children:o.label})},a):null})]}):null,r.jsx(Y.Item,{name:"value",rules:[{required:!0,message:"不能为空"},{validator:(o,a)=>new Promise((u,c)=>{a&&Q(a),u(null)}).catch(u=>{throw console.error(u),new Error("json 格式错误")})}],children:r.jsx(it,{className:"g-boder",height:300,language:"json",options:{minimap:{enabled:!1}}})})]})})},oe=e=>{const{onOpenChange:s,open:n,...t}=e;let l;const i=document.createDocumentFragment(),f=kt.createRoot(i);function o({...u}){clearTimeout(l);const c=It();l=setTimeout(()=>{document.body.append(i),f.render(r.jsx(Bt,{theme:c.getTheme(),children:r.jsx(ot,{...u})}))},100)}function a(){f.unmount(),document.body.removeChild(i)}o({...t,open:!0,onOpenChange:u=>{!u&&a()}})},at=`{
    "services": [
        {
            "name": "service-0",
            "addr": ":8080",
            // "interface": "eth0",
            // "admission": "admission-0",
            // "bypass": "bypass-0",
            // "resolver": "resolver-0",
            // "hosts": "hosts-0",
            "handler": {
                "type": "auto",
                // "auth": {
                //     "username": "gost",
                //     "password": "gost"
                // },
                // "auther": "auther-0",
                // "retries": 1,
                // "chain": "chain-0",
                // "metadata": {
                //     "bar": "baz",
                //     "foo": "bar"
                // }
            },
            "listener": {
                "type": "tcp",
                // "auth": {
                //     "username": "user",
                //     "password": "pass"
                // },
                // "auther": "auther-0",
                // "chain": "chain-0",
                // "tls": {
                //     "certFile": "cert.pem",
                //     "keyFile": "key.pem",
                //     "caFile": "ca.pem"
                // },
                // "metadata": {
                //     "abc": "xyz",
                //     "def": 456
                // }
            },
            // "forwarder": {
            //     "nodes": [
            //         {
            //             "name": "target-0",
            //             "addr": "192.168.1.1:1234"
            //         },
            //         {
            //             "name": "target-1",
            //             "addr": "192.168.1.2:2345"
            //         }
            //     ],
            //     "selector": {
            //         "strategy": "round",
            //         "maxFails": 1,
            //         "failTimeout": 30
            //     }
            // }
        }
    ],
    "chains": [
        {
            "name": "chain-0",
            // "selector": {
            //     "strategy": "round",
            //     "maxFails": 1,
            //     "failTimeout": 30
            // },
            "hops": [
                {
                    "name": "hop-0",
                    // "interface": "192.168.1.2",
                    // "selector": {
                    //     "strategy": "rand",
                    //     "maxFails": 3,
                    //     "failTimeout": 60
                    // },
                    // "bypass": "bypass-0",
                    "nodes": [
                        {
                            "name": "node-0",
                            "addr": ":1080",
                            // "interface": "eth1",
                            // "bypass": "bypass-0",
                            "connector": {
                                "type": "socks5",
                                "auth": {
                                    "username": "user",
                                    "password": "pass"
                                },
                                // "metadata": {
                                //     "foo": "bar"
                                // }
                            },
                            "dialer": {
                                "type": "tcp",
                                // "auth": {
                                //     "username": "user",
                                //     "password": "pass"
                                // },
                                // "tls": {
                                //     "caFile": "ca.pem",
                                //     "secure": true,
                                //     "serverName": "example.com"
                                // },
                                // "metadata": {
                                //     "bar": "baz"
                                // }
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "authers": [
        {
            "name": "auther-0",
            "auths": [
                {
                    "username": "user1",
                    "password": "pass1"
                },
                {
                    "username": "user2",
                    "password": "pass2"
                }
            ]
        }
    ],
    "admissions": [
        {
            "name": "admission-0",
            "whitelist": false,
            "matchers": [
                "127.0.0.1",
                "192.168.0.0/16"
            ]
        }
    ],
    "bypasses": [
        {
            "name": "bypass-0",
            "whitelist": false,
            "matchers": [
                "*.example.com",
                ".example.org",
                "0.0.0.0/8"
            ]
        }
    ],
    "resolvers": [
        {
            "name": "resolver-0",
            "nameservers": [
                {
                    "addr": "udp://8.8.8.8:53",
                    "chain": "chain-0",
                    "prefer": "ipv4",
                    "clientIP": "1.2.3.4",
                    "ttl": 60,
                    "timeout": 30
                },
                {
                    "addr": "tcp://1.1.1.1:53"
                },
                {
                    "addr": "tls://1.1.1.1:853"
                },
                {
                    "addr": "https://1.0.0.1/dns-query",
                    "hostname": "cloudflare-dns.com"
                }
            ]
        }
    ],
    "hosts": [
        {
            "name": "hosts-0",
            "mappings": [
                {
                    "ip": "127.0.0.1",
                    "hostname": "localhost"
                },
                {
                    "ip": "192.168.1.10",
                    "hostname": "foo.mydomain.org",
                    "aliases": [
                        "foo"
                    ]
                },
                {
                    "ip": "192.168.1.13",
                    "hostname": "bar.mydomain.org",
                    "aliases": [
                        "bar",
                        "baz"
                    ]
                }
            ]
        }
    ],
    "tls": {
        "certFile": "cert.pem",
        "keyFile": "key.pem",
        "caFile": "ca.pem"
    },
    "log": {
        "output": "stderr",
        "level": "debug",
        "format": "json",
        "rotation": {
            "maxSize": 100,
            "maxAge": 10,
            "maxBackups": 3,
            "localTime": false,
            "compress": false
        }
    },
    "profiling": {
        "addr": ":6060",
        "enabled": true
    },
    "api": {
        "addr": ":18080",
        "pathPrefix": "/api",
        "accesslog": true,
        "auth": {
            "username": "user",
            "password": "password"
        },
        "auther": "auther-0"
    },
    "metrics": {
        "addr": ":9000",
        "path": "/metrics"
    }
}`,In=[],Ue=xn(at,In,{allowTrailingComma:!0}),Bn=e=>{if(!Ue)return;const s=Tn(Ue,[e,0]);if(s){const{offset:n,length:t}=s;return at.substring(n,n+t)}},E=(e,s="默认")=>{const n=Bn(e);if(n)return{label:s,json:n}},Fn=e=>`{
    "name": "${e}-0",
    "file": {
      "path": "/path/to/file"
    }
  }`,_n=(e,s)=>`{
    "name": "${e}-0",
    "redis": {
      "addr": "127.0.0.1:6379",
      "db": "1",
      "password": "123456",
      ${s?`"type": "${s}",`:""}
      "key": "gost:${e}-0"
    }
  }`,zn=e=>`{
    "name": "${e}-0",
    "http": {
      "url": "http://127.0.0.1:8000",
      "timeout": "10s"
    }
  }`,ct=e=>`{
    "name": "${e}-0",
    "plugin": {
      "type": "grpc",
      // "type": "http",
      "addr": "127.0.0.1:8000",
      "token": "gost",
      // "tls": {}
    }
  }`,W=(e,s="",n)=>{const t=s?`// ${s} 
`:"";return[{label:"文件",json:t+Fn(e)},{label:"Redis",json:t+_n(e,n==null?void 0:n.redisType)},{label:"HTTP",json:t+zn(e)},{label:"插件",json:t+ct(e)}]},De=E("admissions"),Mn=[De||{label:"内联",json:`
      // https://gost.run/concepts/admission
      {
        "name": "admission-0",
        "matchers": [
          "127.0.0.1",
          "192.168.0.0/16",
          "example.com"
        ]
      }`},...W("admission","https://gost.run/concepts/admission")],He=E("authers"),Rn=[He||{label:"内联",json:`
    // https://gost.run/concepts/auth
    {
      "name": "auther-0",
      "auths": [
        {
          "username": "user1",
          "password": "pass1"
        },
        {
          "username": "user2",
          "password": "pass2"
        }
      ]
    }`},...W("auther","https://gost.run/concepts/auth")],Un=E("chains"),Dn=[Un,{label:"典型转发链",cli:"",json:`
{
  "name": "chain-0",
  "hops": [
    {
      "name": "hop-0",
      "nodes": [
        {
          "name": "node-0",
          "addr": "proxy.xxx.com:1080",
          "connector": {
            "type": "socks5",
            "auth": {
              "username": "username",
              "password": "password"
            }
          },
          "dialer": {
            "type": "tcp",
            "tls": {
              "serverName": "proxy.xxx.com"
            }
          }
        }
      ]
    }
  ]
}
      `}],Je=E("bypasses"),Hn=[Je||{label:"内联",json:`
      // https://gost.run/concepts/bypass/
      {
        "name": "bypass-0",
        "matchers": [
          "127.0.0.1",
          "172.10.0.0/16",
          "localhost",
          "*.example.com",
          ".example.org"
        ]
      }`},...W("bypass","https://gost.run/concepts/bypass/")],Pe=E("hops"),Jn=[Pe||{label:"内联",json:`
    // https://gost.run/concepts/hop
    {
      "name": "hop-0",
      "nodes": [
        {
          "name": "node-0",
          "addr": ":8888",
          "connector": {
            "type": "http"
          },
          "dialer": {
            "type": "tcp"
          }
        },
        {
          "name": "node-1",
          "addr": ":9999",
          "connector": {
            "type": "socks5"
          },
          "dialer": {
            "type": "tcp"
          }
        }
      ]
    }`},...W("hop","https://gost.run/concepts/hop")],We=E("hosts"),Pn=[We||{label:"内联",json:`
      // https://gost.run/concepts/hosts/
      {
        "name": "hosts-0",
        "mappings": [
          {
            "ip": "127.0.0.1",
            "hostname": "example.com"
          },
          {
            "ip": "2001:db8::1",
            "hostname": "example.com"
          }
        ]
      }`},...W("hosts","https://gost.run/concepts/hosts/")],qe=E("ingresses"),Wn=[qe||{label:"内联",json:`{
        "name": "ingress-0",
        "rules": [
          {
            "hostname": "example.com",
            "endpoint": "4d21094e-b74c-4916-86c1-d9fa36ea677b"
          },
          {
            "hostname": "example.org",
            "endpoint": "ac74d9dd-3125-442a-a7c1-f9e49e05faca"
          }
        ]
      }`},...W("ingress","https://gost.run/concepts/ingress/",{redisType:"hash"})],Ge=E("routers"),qn=[Ge||{label:"内联",json:`
      // https://gost.run/concepts/router/
      {
        "name": "router-0",
        "routes": [
          {
            "net": "192.168.1.0/24",
            "gateway": "192.168.123.2"
          },
          {
            "net": "172.10.0.0/16",
            "gateway": "192.168.123.3"
          }
        ]
      }`},...W("router","https://gost.run/concepts/router/")],D=(e,s,n)=>{let t=`
  {
    "name": "service-0",
    "addr": ":1080",
    "handler": {
      "type": "${e}",
      // "auth": {
      //   "username": "user",
      //   "password": "password"
      // }
    },
    "listener": {
      "type": "${s}"
    }
  }`;if(n){const l=fe(t,["metadata"],n,{});l.push(...fe(t,["handler","metadata"],n,{})),l.push(...fe(t,["listener","metadata"],n,{})),t=Ie(t,l)}return t},Gn=E("services"),Qn=[Gn,{label:"端口转发",cli:"-L tcp://:80/:8080",json:`
      {
        "name": "service-0", // 服务名称
        "addr": ":80",
        "handler": {
          "type": "tcp"
        },
        "listener": {
          "type": "tcp"
        },
        "forwarder": {
          "nodes": [
            {
              "name": "target-0",
              "addr": ":8080"
            }
          ]
        }
      }`},{label:"反向代理",cli:"",json:`
      {
        "name": "service-0",
        "addr": ":80",
        "handler": {
            "type": "tcp",
            "metadata": {
                "sniffing": "true"
            }
        },
        "listener": {
            "type": "tcp"
        },
        "forwarder": {
            "nodes": [
                {
                    "name": "target-1",
                    "addr": "www.baidu.com:80",
                    // "host": "myhost.com",
                    // "path": "/"
                    "http": {
                        "host": "www.baidu.com"
                    }
                }
            ]
        }
      }`},{label:"代理服务",children:[{label:"http",children:[{label:"http",json:D("http","tcp")},{label:"https(http+tsl)",json:D("http","tls")},{label:"http+wss",json:D("http","wss")},{label:"http2",json:D("http2","http2")}]},{label:"relay",children:[{label:"relay+tcp",json:D("relay","tcp")},{label:"relay+tls",json:D("relay","tls")},{label:"relay+wss",json:D("relay","tls")}]},{label:"socks",children:[{label:"socks4",json:D("socks","tcp")},{label:"socks5",json:D("socks5","tcp")},{label:"socks5(支持udp)",json:D("socks5","tcp",{udp:"true"})},{label:"socks5+tls",json:D("socks5","tls",{notls:"true"})}]}]},{label:"代理转发",cli:"-L socks5://:1080 -F socks5://xxx.com:1080",json:`
      {
        "name": "service-0",
        "addr": ":1080",
        "handler": {
          "type": "socks5",
          "chain": "chain-0"
        },
        "listener": {
          "type": "tcp"
        }
      }`}],Qe=E("climiter"),Xn=[Qe||{label:"内联",json:`
    // https://gost.run/concepts/limiter/
    {
      "name": "climiter-0",
      "limits": [
        "$ 1000",
        "$$ 100",
        "192.168.1.1  10"
      ]
    }`},...W("climiter","https://gost.run/concepts/limiter/",{redisType:"set"})],Xe=E("limiters"),Zn=[Xe||{label:"内联",json:`
    // https://gost.run/concepts/limiter/
    {
      "name": "limiter-0",
      "limits": [
        "$ 100MB 100MB",
        "$$ 10MB",
        "192.168.1.1  512KB 1MB",
        "192.168.0.0/16  1MB  5MB"
      ]
    }`},...W("limiters","https://gost.run/concepts/limiter/",{redisType:"set"})],Ze=E("rlimiter"),Yn=[Ze||{label:"内联",json:`
    // https://gost.run/concepts/limiter/
    {
      "name": "rlimiter-0",
      "limits": [
        "$ 100",
        "$$ 10",
        "192.168.1.1  50",
        "192.168.0.0/16  5"
      ]
    }`},...W("rlimiter","https://gost.run/concepts/limiter/",{redisType:"set"})],Kn=E("resolvers"),Cn=[Kn,{label:"插件",json:ct("resolver")}],Ye=E("sds"),es=[Ye||{label:"HTTP插件",json:`
      // https://gost.run/concepts/sd/
      {
        "name": "sd-0",
        "plugin": {
          "type": "http",
          "addr": "http://127.0.0.1:8000/sd",
          // "token": "gost",
          // "tls": {}
        }
      }`}],Ke=E("observers"),ts=[Ke||{label:"插件",json:`
      // https://gost.run/concepts/observer/
      {
        "name": "observer-0",
        "plugin": {
          "type": "grpc",
          // "type": "http",
          "addr": "127.0.0.1:8000",
          "token": "gost",
          // "tls": {}
        }
      }`}],ns={admissions:Mn,authers:Rn,bypasses:Hn,chains:Dn,climiters:Xn,limiters:Zn,rlimiters:Yn,hops:Jn,hosts:Pn,ingresses:Wn,resolvers:Cn,routers:qn,sds:es,observers:ts,services:Qn},ut=e=>{const{name:s}=e;return b.useMemo(()=>ns[s],[s])},ft=e=>{const{name:s,localApi:n,gostConfig:t,localConfig:l}=e,i=b.useMemo(()=>(t==null?void 0:t[s])||[],[t,s]),f=b.useMemo(()=>n?(l==null?void 0:l[s])||[]:[],[l,s,n]),o=b.useMemo(()=>[...i,...f],[i,f]);return{dataList:i,dataSource:o}},te=ae.createContext({}),Ce=(e,s,n)=>JSON.stringify(s),ss=(e,s)=>{var n,t;return((t=(n=e==null?void 0:e.name)==null?void 0:n.toLowerCase())==null?void 0:t.indexOf(s))!==-1},ls=e=>{const{name:s,title:n,api:t,localApi:l,keyName:i,rowKey:f="name",keyword:o,renderConfig:a=Ce,filter:u=ss}=e,{localList:c,comm:m}=b.useContext(Ve),{gostConfig:j,localConfig:k}=b.useContext(ue),{dataList:w,dataSource:T}=ft({localApi:l,name:i,gostConfig:j,localConfig:k}),v=ut({name:i});Ft.useApp();const{deleteValue:L,updateValue:O,dispatch:h,enable:p,updateLocal:d,deleteLocal:g,addValue:y}=m,V=b.useRef({dataList:w,dataSource:T});b.useImperativeHandle(V,()=>({dataList:w,dataSource:T}),[w,T]);const q=b.useMemo(()=>o?T.filter(N=>u(N,o)):T,[T,u,o]);return b.useEffect(()=>{function N({path:S,record:x}){const{dataList:A,dataSource:J}=V.current,I=A.includes(x),U=x.name,G=S.split(","),ht=G.reduce((X,ne)=>X==null?void 0:X[ne],x),gt=X=>{let ne=x;G.forEach((Be,bt)=>{bt===G.length-1?ne[Be]=X:ne=ne[Be]})};oe({title:"修改",initialValues:{value:ie(ht)},onFinish:async X=>(gt(Q(X.value)),I?await O(U,x):await d(U,x),!0)})}return _.on(`edit:${s}`,N),()=>{_.off(`edit:${s}`,N)}},[]),r.jsx("div",{style:{height:348,overflow:"auto"},children:r.jsx(_t,{rowKey:N=>N._id_||N.name,scroll:{y:290},size:"small",dataSource:q,columns:[{title:f,dataIndex:f,ellipsis:!0,width:100},{title:"详情",ellipsis:!0,render:(N,S,x)=>{const J=w.includes(S)?U=>O(S.name,U||S):U=>d(S.name,U||S);let I;try{I=a(N,S,x)}catch{I=Ce(N,S)}return r.jsx(te.Provider,{value:{update:J},children:I})}},{title:"操作",width:l?120:90,align:"right",dataIndex:f,render:(N,S,x)=>{const A=w.includes(S),J={...S};return delete J.status,r.jsxs(z,{size:2,children:[l?A?r.jsx(R,{title:"点击禁用",icon:r.jsx(tt,{style:{color:zt.primary}}),type:"link",size:"small",onClick:async()=>{await h(S)}}):r.jsx(R,{title:"点击启用",type:"link",icon:r.jsx(hn,{style:{color:Mt.primary}}),size:"small",onClick:async()=>{await p(S)}}):null,r.jsx(R,{title:"修改",icon:r.jsx(Rt,{}),type:"link",size:"small",onClick:()=>{oe({title:`修改 ${N||""}`,templates:v,initialValues:{value:ie(J)},onFinish:async I=>{const{value:U}=I,G=Q(U);return A?await O(S.name,G):await d(S.name,{...J,...G}),!0}})}}),r.jsx(R,{title:"复制",icon:r.jsx(Ut,{}),type:"link",size:"small",onClick:()=>{oe({title:`复制自 ${N||""}`,templates:v,initialValues:{value:ie(J)},onFinish:async I=>{const{value:U}=I,G=Q(U);return await m.addValue(G),!0}})}}),r.jsx(Dt,{title:"警告",description:"确定要删除吗？",onConfirm:()=>{A?L(S):g(S)},children:r.jsx(R,{title:"删除",icon:r.jsx(Ht,{}),type:"link",size:"small"})})]})}}],pagination:!1})})},rs=e=>{const{keyName:s,title:n}=e,{comm:t}=b.useContext(Ve),l=ut({name:s});return r.jsx(ot,{title:`添加 ${n||""}`,templates:l,trigger:r.jsx(R,{icon:r.jsx(Jt,{}),size:"small"}),onFinish:async i=>{const{value:f}=i,o=Q(f);return await t.addValue(o),!0}})},B=e=>({keyName:e,api:jt[e],localApi:wt[e],rowKey:"name"}),is=[{name:"admission",title:"准入控制器(Admission)",subTitle:"准入控制器",...B("admissions")},{name:"auther",title:"认证器(Auther)",subTitle:"认证器",...B("authers")},{name:"bypass",title:"分流器(Bypass)",subTitle:"分流器",...B("bypasses")},{name:"chain",title:"转发链(Chain)",subTitle:"转发链",...B("chains")},{name:"climiter",title:"并发连接数限制",subTitle:"",...B("climiters")},{name:"limiter",title:"流量速率限制",subTitle:"",...B("limiters")},{name:"rlimiter",title:"请求速率限制",subTitle:"",...B("rlimiters")},{name:"hop",title:"跳跃点(Hop)",subTitle:"跳跃点",...B("hops")},{name:"host",title:"主机映射器(Hosts)",subTitle:"主机映射器",...B("hosts")},{name:"ingress",title:"Ingress",subTitle:"Ingress",...B("ingresses")},{name:"resolver",title:"域名解析器(Resolver)",subTitle:"域名解析器",...B("resolvers")},{name:"service",title:"服务(Service)",subTitle:"服务",...B("services")},{name:"sd",title:"服务发现(SD)",subTitle:"服务发现",...B("sds")},{name:"observer",title:"观测器(Observer)",subTitle:"观测器",...B("observers")}],os=e=>is.find(s=>s.name===e),Ae=e=>{const{boxShadow:s,className:n,...t}=e,l=we(n,{"antd-cord-boxShadow":s});return r.jsx(Pt,{className:l,...t})},F=e=>{const{title:s,subTitle:n,name:t,keyName:l,api:i,boxShadow:f=!0,bordered:o=!1,rowKey:a="name",renderConfig:u,localApi:c,filter:m}=b.useMemo(()=>({...os(e.module||""),...e}),[e]),[j,k]=b.useState(""),w={title:n||"",keyword:j,name:t,api:i,keyName:l,rowKey:a,localApi:c,renderConfig:u,filter:m},{gostConfig:T,localConfig:v}=b.useContext(ue),{dataSource:L}=ft({localApi:c,name:l,gostConfig:T,localConfig:v}),O=b.useMemo(()=>{const h=async p=>{await i.post(p)};return{updateValue:async(p,d,g=!0)=>{await i.put(p,d),g&&_.emit("apiUpdate",{})},deleteValue:async(p,d=!0)=>{await i.delete(p.name),d&&_.emit("apiUpdate",{})},addValue:async(p,d=!0)=>{let g=p.name||`${t}-0`;const y=()=>L==null?void 0:L.find(V=>V.name===g);if(y()&&!await new Promise((q,N)=>{Ee.confirm({title:"name无效",content:"是否自动分配name",zIndex:2e3,onOk:()=>q(!0),onCancel:()=>q(!1)})}))throw!1;for(;y();)g=g.replace(/\d*$/,V=>String(V==""?"-0":Number(V)+1));await h({...p,name:g}),p.name!==g&&Wt.info({description:`新分配 name 为 "${g}"`,message:"自动修正提醒"}),d&&_.emit("apiUpdate",{})},dispatch:async p=>{c&&(await i.delete(p.name),await c.add(p),_.emit("update"))},enable:async p=>{c&&(await i.post(p),await c.delete(p.name),_.emit("update"))},updateLocal:async(p,d)=>{c&&(await c.put(p,{...d,name:p}),_.emit("localUpdate"))},deleteLocal:async p=>{c&&(await c.delete(p.name),_.emit("localUpdate"))}}},[i,L,c,t]);return b.useEffect(()=>vt(t,O),[O,t]),r.jsx(Ve.Provider,{value:{name:t,comm:O},children:r.jsx(Ae,{boxShadow:f,bordered:o,title:s,extra:r.jsxs(z,{children:[r.jsx(Ne.Search,{allowClear:!0,onChange:h=>{const p=h.target.value;k(p)},size:"small"}),r.jsx(rs,{...w})]}),children:r.jsx(ls,{...w})})})},as=e=>{const{name:s,addr:n,connector:{type:t,metadata:l}={},dialer:{type:i}={}}=e,f=l?xt.stringify(l):"";return r.jsxs(z,{children:[(t||i)&&r.jsx(P,{color:"#87d068",children:`${t}${i?"+"+i:""}`}),r.jsx(P,{color:"green",children:n}),f&&r.jsx(P,{color:"purple",title:"_metadata",children:"metadata"})]})},Se=({node:e,upjson:s,isLink:n=!1})=>{const{name:t}=e,{update:l}=b.useContext(te);return r.jsx(re,{color:"#ddffbf",title:r.jsx(as,{...e}),children:r.jsx(P,{bordered:!1,color:"green",className:"editor-json",title:"双击修改",onDoubleClick:()=>{s&&oe({title:"修改",initialValues:{value:ie(e)},onFinish:async i=>(s(Q(i.value)),l(),!0)})},children:t})})},dt=e=>{var f;let s=e,n=!1;const{gostConfig:t,localConfig:l}=b.useContext(ue);if(!s.nodes){const o=[...(t==null?void 0:t.hops)||[],...(l==null?void 0:l.hops)||[]].find(a=>a.name===s.name);o&&(n=!0,s=o)}const{nodes:i}=s;if(!i||(i==null?void 0:i.length)<=0)return`[${e.name}(noNodes)]`;if(n){const o=(f=t==null?void 0:t.hops)==null?void 0:f.includes(s),a=s.name;return r.jsx(te.Provider,{value:{update:async u=>{const c=await $e("hop");return(o?j=>c.updateValue(a,j||s):j=>c.updateLocal(a,j||s))(u)}},children:r.jsx(z,{size:5,children:i.map((u,c)=>r.jsx(Se,{node:u,isLink:!0,upjson:m=>i[c]=m},c))})})}return r.jsx(z,{size:5,children:i.map((o,a)=>r.jsx(Se,{node:o,upjson:u=>i[a]=u},o.name+a))})};function cs(e){const{update:s}=b.useContext(te);return r.jsx(z,{size:5,children:e.hops.map((n,t)=>{const l=r.jsx(dt,{...n});return r.jsx(re,{title:l,color:"#c7e7ff",arrow:!1,children:r.jsx(P,{bordered:!1,color:"blue",className:"editor-json",title:"双击修改",onDoubleClick:()=>{oe({title:"修改",initialValues:{value:ie(n)},onFinish:async i=>(e.hops[t]=Q(i.value),s(),!0)})},children:n.name})},n.name+t)}).reduce((n,t,l)=>(n.length>0&&n.push(r.jsx(qt,{style:{color:"blue",fontSize:12}},"_sp_"+l)),n.push(t),n),[])})}function pt(e){const{hops:s}=e;return r.jsx(cs,{hops:s,root:e})}const us=e=>{b.useContext(ue);const s={module:"chain",renderConfig:(n,t,l)=>r.jsx(pt,{...t})};return r.jsx(F,{...s})},mt=(e,s)=>{const{gostConfig:n,localConfig:t}=b.useContext(ue),l=b.useMemo(()=>{var o;return(o=n==null?void 0:n[s])==null?void 0:o.find(a=>a.name===e)},[n,e,s]),i=b.useMemo(()=>{var o;return(o=t==null?void 0:t[s])==null?void 0:o.find(a=>a.name===e)},[t,e,s]);return[l??i,!!l]},fs=e=>{const[s,n]=mt(e.name,"hops");let t=e,l=!1;t.nodes||(t=s,l=!!s);const{nodes:i}=t;if(!i||(i==null?void 0:i.length)<=0)return`[${e.name}(noNodes)]`;const f=r.jsx(z,{size:5,children:i.map((o,a)=>r.jsx(Se,{node:o,upjson:u=>i[a]=u},o.name+a))});if(l){const o=t.name;return r.jsx(te.Provider,{value:{update:async a=>{const u=await $e("hop");return(n?m=>u.updateValue(o,m||t):m=>u.updateLocal(o,m||t))(a)}},children:f})}return f},et=e=>{const[s,n]=mt(e.chainName,"chains");if(!s)return"[no chain]";const t=e.chainName;return r.jsx(te.Provider,{value:{update:async l=>{const i=await $e("chain");return(n?o=>i.updateValue(t,o||s):o=>i.updateLocal(t,o||s))(l)}},children:r.jsx(pt,{...s})})},ds=e=>{const{name:s,addr:n,handler:t,listener:l,forwarder:i}=e,f=b.useMemo(()=>{const o=t==null?void 0:t.type,a=l==null?void 0:l.type;return o===a?o:`${o}+${a}`},[t,l]);return r.jsxs(z,{children:[r.jsx(P,{color:"#87d068",children:f}),r.jsx(P,{color:"green",children:n}),t.chain&&r.jsx(re,{title:r.jsx(et,{chainName:t.chain}),color:"#c7e7ff",arrow:!1,children:r.jsx(P,{children:"转发链"})}),l.chain&&r.jsx(re,{title:r.jsx(et,{chainName:l.chain}),color:"#fff0d7",arrow:!1,children:r.jsx(P,{color:"orange",children:"远程端口转发"})}),i&&r.jsx(re,{title:r.jsx(fs,{...i}),color:"#c7e7ff",arrow:!1,children:r.jsx(P,{children:"转发/反代 节点"})})]})},ps=e=>{const{colSpan:s}=e;je();const n={module:"service",renderConfig:(t,l,i)=>r.jsx(ds,{...l}),filter:(t,l)=>{const{name:i,addr:f,handler:o,listener:a}=t;function u(c){const m=c==null?void 0:c.toLowerCase();return m?m.indexOf(l)!==-1:!1}return u(i)||u(f)||u(o==null?void 0:o.type)||u(a==null?void 0:a.type)}};return r.jsx($,{...s,xxl:16,children:r.jsx(F,{...n})})},ms=e=>r.jsx(F,{module:"hop",renderConfig:(s,n,t)=>r.jsx(dt,{...n})}),H={xs:24,sm:24,md:12,lg:12,xl:12,xxl:8},ke={sm:24,xxl:8},bs=()=>{const e=se(),s=je(),[n,t]=b.useState(!1),[l,i]=b.useState(!1),[f,o]=b.useState(!0),[a,u]=b.useState([]),c=b.useRef({}),m=b.useCallback(async()=>Tt().then(k=>k.sort((w,T)=>{const v=w.time||0;return(T.time||0)-v})).then(k=>u(k.filter(w=>w.addr!==e.addr).map(w=>({key:w.addr,label:r.jsx("a",{href:`./?use=${w.addr}`,children:w.addr})})))),[]);b.useEffect(()=>{Ot().then(v=>{v&&_.emit("update")});const k=c.current.onSave=async()=>{try{i(!0);const{saveFormat:v,savePath:L}=se.get()||{};await Lt(v,L),o(!0)}finally{i(!1)}},w=()=>{var v;if(o(!1),!!((v=se.get())!=null&&v.autoSave))return k()},T=async v=>{var L;if(o(!1),!!((L=se.get())!=null&&L.autoSave)&&(v==null?void 0:v.url)!==Nt.config)return k()};return m(),_.on("update",w),_.on("apiUpdate",T),()=>{_.off("update",w),_.off("apiUpdate",T)}},[]);const j=b.useMemo(()=>{const k=[];return a.length&&(k.push({key:"2",label:" 切换 ",children:a}),k.push({type:"divider"})),k.push({key:"new",label:"打开新链接",onClick:()=>{window.open(location.href,void 0,"noopener")}}),k},[a]);return r.jsxs(he,{style:{height:"100vh",overflow:"hidden"},children:[r.jsxs(he.Header,{style:{color:"#FFF",paddingInline:20},children:[r.jsxs(ge,{align:"middle",justify:"space-between",wrap:!1,children:[r.jsx($,{color:"",children:r.jsx(R,{type:"link",icon:r.jsx(Gt,{}),onClick:async()=>{je.set(await At())},children:"刷新配置"})}),r.jsx($,{children:e.addr}),r.jsx($,{children:r.jsxs(z,{children:[r.jsxs(z.Compact,{children:[r.jsx(R,{icon:f?r.jsx(tt,{}):r.jsx(ln,{}),loading:l,onClick:()=>{var k,w;return(w=(k=c.current)==null?void 0:k.onSave)==null?void 0:w.call(k)},children:"保存到服务器"}),r.jsx(R,{icon:r.jsx(un,{}),onClick:()=>t(!0)})]}),r.jsx(R,{icon:r.jsx(Qt,{}),onClick:()=>{Vn(Oe(s),"gost.json")},children:"下载当前配置"}),r.jsx(ve.Button,{menu:{items:j},onClick:St,children:"退出"}),r.jsx(Vt,{size:"small"})]})})]}),r.jsx(Ee,{destroyOnClose:!0,open:n,onCancel:()=>t(!1),footer:!1,children:r.jsxs(Y,{initialValues:e,layout:"horizontal",labelCol:{span:4},onValuesChange:(k,w)=>{Object.assign(e,k),se.set(e),e.isLocal&&$t(e.addr,e)},children:[r.jsx(Y.Item,{name:"autoSave",label:"自动保存",valuePropName:"checked",children:r.jsx(Xt,{})}),r.jsx(Y.Item,{name:"saveFormat",label:"格式",initialValue:"json",children:r.jsxs(be.Group,{optionType:"button",buttonStyle:"solid",children:[r.jsx(be,{value:"json",children:"json"}),r.jsx(be,{value:"yaml",children:"yaml"})]})}),r.jsx(Y.Item,{name:"savePath",label:"保存路径",trigger:"onChange",children:r.jsx(Ne,{placeholder:"指定保存，默认保存到上下文目录"})})]})})]}),r.jsx(he.Content,{style:{height:"100%",padding:16,boxSizing:"border-box",overflow:"auto"},children:r.jsxs(ge,{gutter:[16,16],style:{overflow:"hidden"},children:[r.jsx(ps,{colSpan:H}),r.jsx($,{...H,children:r.jsx(us,{})}),r.jsx($,{...H,children:r.jsx(ms,{})}),r.jsx($,{...H,children:r.jsx(F,{module:"auther"})}),r.jsx($,{...H,children:r.jsx(F,{module:"admission"})}),r.jsx($,{...H,children:r.jsx(F,{module:"bypass"})}),r.jsx($,{...H,children:r.jsx(F,{module:"host"})}),r.jsx($,{...H,children:r.jsx(F,{module:"ingress"})}),r.jsx($,{...H,children:r.jsx(F,{module:"resolver"})}),r.jsx($,{...H,children:r.jsx(F,{module:"sd"})}),r.jsx($,{...H,children:r.jsx(F,{module:"observer"})}),r.jsx($,{span:24,children:r.jsx(Ae,{boxShadow:!0,title:"限速限流",children:r.jsxs(ge,{gutter:[16,16],children:[r.jsx($,{...ke,children:r.jsx(F,{module:"limiter",bordered:!0,boxShadow:!1})}),r.jsx($,{...ke,children:r.jsx(F,{module:"rlimiter",bordered:!0,boxShadow:!1})}),r.jsx($,{...ke,children:r.jsx(F,{module:"climiter",bordered:!0,boxShadow:!1})})]})})}),r.jsx($,{span:24,children:r.jsx(Ae,{boxShadow:!0,title:"All Config JSON",styles:{body:{padding:20}},children:r.jsx(it,{className:"g-boder",value:Oe(s),height:500,language:"json",options:{minimap:{enabled:!1},readOnly:!0}})})})]})})]})};export{bs as default};
